.swap {
  position: relative;
  display: inline-grid;
  user-select: none;
  place-content: center;
  cursor: pointer;

  & > * {
    grid-column-start: 1;
    grid-row-start: 1;
    transition-property: transform, opacity;
    transition-duration: 0.3s;
    transition-timing-function: ease-out;
  }

  & input {
    appearance: none;
  }

  & .swap-on,
  & .swap-indeterminate,
  & input:indeterminate ~ .swap-on {
    opacity: 0;
  }

  & input:checked ~ .swap-off,
  &.swap-active .swap-off,
  & input:indeterminate ~ .swap-off {
    opacity: 0;
  }

  & input:checked ~ .swap-on,
  &.swap-active .swap-on,
  & input:indeterminate ~ .swap-indeterminate {
    opacity: 1;
  }

  &-rotate {
    & .swap-on,
    & .swap-indeterminate,
    & input:indeterminate ~ .swap-on {
      transform: rotate(45deg);
    }

    & input:checked ~ .swap-off,
    &.swap-active .swap-off,
    & input:indeterminate ~ .swap-off {
      transform: rotate(-45deg);
    }

    & input:checked ~ .swap-on,
    &.swap-active .swap-on,
    & input:indeterminate ~ .swap-indeterminate {
      transform: rotate(0deg);
    }
  }

  &-flip {
    transform-style: preserve-3d;
    perspective: 16em;

    & .swap-on,
    & .swap-indeterminate,
    & input:indeterminate ~ .swap-on {
      transform: rotateY(180deg);
      backface-visibility: hidden;
      opacity: 1;
    }

    & input:checked ~ .swap-off,
    &.swap-active .swap-off,
    & input:indeterminate ~ .swap-off {
      transform: rotateY(-180deg);
      backface-visibility: hidden;
      opacity: 1;
    }

    & input:checked ~ .swap-on,
    &.swap-active .swap-on,
    & input:indeterminate ~ .swap-indeterminate {
      transform: rotateY(0deg);
    }
  }
}
